<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>채팅 - 당근마켓</title>
    <!-- 분리된 CSS 파일을 연결합니다. -->
    <link rel="stylesheet" href="/css/chat/chat_styles.css">
    <link rel="stylesheet" href="/css/header/header.css">
</head>
<body>

<header th:replace="~{fragments/header :: headerFragment}"></header>

<main class="chat-page-container">
    <div class="chat-container">
        <!-- 왼쪽: 채팅방 목록 패널 -->
        <aside class="chat-list-panel">
            <div class="panel-header">
                <span class="user-id" th:text="${loginUser.username}">내아이디</span>
                <div class="toggle-switch-container">
                    <span>읽지 않은 항목</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <ul class="chat-list">
                <!-- AI 챗봇 채팅방 (활성화 상태) -->
                <li class="chat-item active">
                    <div class="chat-avatar"></div>
                    <div class="chat-info">
                        <span class="chat-name">AI 챗봇</span>
                        <p class="chat-preview">궁금한 내용을 물어보세요!</p>
                    </div>
                </li>
            </ul>
        </aside>

        <section class="chat-room-panel">
            <header class="chat-room-header">
                <h3>AI 챗봇</h3>
            </header>

            <!-- 메시지 표시 영역 -->
            <div class="chat-messages">
            </div>

            <!-- 메시지 입력 폼 -->
            <form class="chat-input-form" onsubmit="return false;">
                <textarea placeholder="메시지를 입력해주세요"></textarea>
                <button type="submit">전송</button>
            </form>
        </section>
    </div>
</main>
<script th:inline="javascript">
    const chatId = /*[[${chatId}]]*/ 0;
    const userId = /*[[${loginUser.id}]]*/ 0;
</script>
<!-- 분리된 채팅 로직 JS -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script src="/js/chat.js"></script>
</body>
</html>